"use strict";(self.webpackChunkbuddyshop=self.webpackChunkbuddyshop||[]).push([[34],{8034:function(e,n,r){r.r(n),r.d(n,{default:function(){return A}});var t=r(2982),a=r(885),s=r(2791),o=r(9434),i=r(5126),c=r(6612),d=r(3504),u=r(8992),l=r(184),h=function(e){var n=e.product,r=e.dispatch,t=e.handler,a=e.count,s=e.index,o=e.updateCount,h=n.id,m=void 0===h?"":h,v=n.title,p=void 0===v?"":v,f=n.sizes,x=f.price,j=void 0===x?0:x,y=f.retail_price,g=void 0===y?0:y,k=f.size,b=void 0===k?"Normal":k,N=f.allowed,w=f.stock,C=n.variant,_=void 0===C?0:C,z=n.uci,A=n.seller,S=p.split(" ").join("+"),B="".concat("https://buddy-product-images.s3.ap-south-1.amazonaws.com/").concat(A,"/").concat(S,"0"),F=function(){r((0,i.h2)(m,_))};return(0,l.jsxs)("div",{className:"list_item",children:[(0,l.jsx)("img",{src:B,alt:p}),(0,l.jsxs)("div",{className:"info",children:[(0,l.jsx)(d.rU,{to:"/product/".concat(m,"?title=").concat(p,"&category=").concat(z,"&variant=").concat(_),children:(0,l.jsx)("span",{className:"title",children:p})}),(0,l.jsx)("span",{className:"size",children:b}),(0,l.jsxs)("div",{className:"price",children:[(0,l.jsx)("span",{className:"offer",children:(0,u.oB)(j*a)}),(0,l.jsx)("del",{children:g*a})]}),(0,l.jsx)("span",{className:"add_to",onClick:function(){return t(n)},role:"button",children:"Add to Wishlist"}),(0,l.jsx)("span",{className:"remove",onClick:F,role:"button",children:"Remove"})]}),(0,l.jsxs)("div",{className:"counter",children:[(0,l.jsx)("button",{onClick:function(){a>=w?r((0,c.f)({message:"Sorry! Only ".concat(w," items are available in stock"),color:"danger"})):a<N?o(a+1,s):r((0,c.f)({message:"Only ".concat(N," items per purchase are available for this product"),color:"danger"}))},"aria-label":"add quantity",children:"+"}),a,(0,l.jsx)("button",{onClick:function(){a>1?o(a-1,s):F()},"aria-label":"decrease quantity",children:"-"})]})]})},m=(0,s.memo)(h),v=function(){return(0,l.jsxs)(d.rU,{to:"/profile#address",children:[(0,l.jsx)("h4",{children:"Add Address"}),(0,l.jsx)("h5",{children:"Please add an address to continue"})]})},p=function(){var e=(0,o.v9)((function(e){return e.auth.user.address})),n=e.length<1?(0,l.jsx)(v,{}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x,{addresses:e}),(0,l.jsx)(d.rU,{to:"/profile#address",children:(0,l.jsx)("h5",{children:"or add another..."})})]});return(0,l.jsx)("div",{className:"addresses",children:n})},f=function(e){var n=e.address,r=e.index,t=n.full_name,o=void 0===t?"":t,i=n.phone,c=void 0===i?[]:i,d=n.isPrimary,u=void 0!==d&&d,h=n.line1,m=n.line2,v=n.pin,p=n.state,f=n.isHome,x=void 0===f||f,j=(0,s.useState)(),y=(0,a.Z)(j,2),g=y[0],k=y[1];return(0,l.jsxs)("article",{children:[(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"radio",name:"isSelectedAddress",defaultChecked:u,value:r,onChange:function(e){return function(e){var n;k((null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.checked)||!1)}(e)}}),(0,l.jsx)("span",{className:"checkmark",role:"checkbox","aria-checked":g,tabIndex:0,"aria-label":"Select this Address"})]}),(0,l.jsxs)("address",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{children:o}),(0,l.jsx)("h4",{children:c[0]})]}),h+", "+m,(0,l.jsx)("br",{}),p+" "+v,(0,l.jsx)("br",{}),(0,l.jsx)("span",{children:x?"Home":"Work"})]})]})},x=function(e){var n=e.addresses;return(void 0===n?[]:n).map((function(e,n){return(0,l.jsx)(f,{address:e,index:n},n)}))},j=r(5861),y=r(7757),g=r.n(y),k=r(4569),b=r.n(k),N=r(6871),w=function(e){var n=e.currencyFormatter,r=e.totalAmount,t=e.deleiveryAmount,a=e.data,d=e.counts,u=(0,o.I0)(),h=(0,N.s0)(),m=(0,o.v9)((function(e){return e.auth.user})),v=function(){var e=(0,j.Z)(g().mark((function e(n,r,t,s){var o,l,m,v;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={name:"Buddyshop",key:"rzp_test_LmtC6pRVLTJcqS",amount:o=100*n,handler:function(){var e=(0,j.Z)(g().mark((function e(n){var r,t,c;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={razorpay_signature:n.razorpay_signature,razorpay_order_id:n.razorpay_order_id,transactionid:n.razorpay_payment_id,transactionamount:o},e.next=3,b().post("/user/checkout/payment",{data:a,counts:d,address:s,values:t});case 3:null!==(c=e.sent)&&void 0!==c&&null!==(r=c.data)&&void 0!==r&&r.error||(h("/"),u((0,i.FY)()));case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),prefill:{email:r,contact:t},theme:{color:"#458abf"}},e.next=4,b().post("/user/checkout/order",{amount:o});case 4:m=e.sent,l.order_id=m.data.data.id,l.amount=m.data.data.amount,(v=new window.Razorpay(l)).open(),v.on("payment.failed",(function(){u((0,c.f)({message:"Payment unseccessful",color:"danger"}))}));case 10:case"end":return e.stop()}}),e)})));return function(n,r,t,a){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){var e=function(e){var n=document.createElement("script");return n.src=e,n.async=!0,n.crossOrigin="anonymous",n}("https://checkout.razorpay.com/v1/checkout.js");return document.body.appendChild(e),e.onerror=function(){console.warn("Error loading razorpay payment link")},function(){e&&document.body.removeChild(e);for(var n=document.getElementsByClassName("razorpay-container");n.length>0;)document.body.removeChild(n[0])}}),[]);var p=function(){var e=(0,j.Z)(g().mark((function e(){var n,a;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(n=function(){var e=document.getElementsByName("isSelectedAddress");if(!e)return-1;for(var n=0;n<e.length;n++)if(e[n].checked)return n;return-1}())){e.next=6;break}u((0,c.f)({message:"Please add an address first!"})),e.next=8;break;case 6:return e.next=8,v(r+t,null===m||void 0===m?void 0:m.email,null===m||void 0===m||null===(a=m.address[n])||void 0===a?void 0:a.phone[0],null===m||void 0===m?void 0:m.address[n]);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,l.jsxs)("button",{onClick:p,children:["Pay ",n(r+t)]})},C=(0,s.memo)(w),_=function(e){var n=e.totalAmount,r=e.totalItems,t=e.data,a=e.counts,s=e.address,o=Number.parseInt("6000"),i=n>o,c=i?0:50,d=i?"Your order is eligible for":"Add an item of ".concat((0,u.oB)(o-n)," or more to avail");return n>0?(0,l.jsxs)("div",{className:"subtotal",children:[(0,l.jsxs)("h4",{children:[(0,l.jsxs)("span",{children:[(0,u.oB)(n)," "]}),"for ",r," items"]}),(0,l.jsxs)("h4",{children:[d," ",(0,l.jsx)("span",{children:"Free Deleivery"})]}),!i&&(0,l.jsxs)("h5",{children:[(0,l.jsxs)("span",{children:["+ ",(0,u.oB)(50)]})," Shipping"]}),(0,l.jsx)(C,{currencyFormatter:u.oB,totalAmount:n,deleiveryAmount:c,data:t,counts:a,address:s}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Secure"}),(0,l.jsx)("li",{children:"Easy Return"}),(0,l.jsx)("li",{children:"24/7 Support"})]})]}):(0,l.jsx)(l.Fragment,{})},z=function(e){var n,r=e.data,t=e.counts,a=void 0===t?[0,0]:t,s=null===r||void 0===r||null===(n=r.map((function(e,n){var r=e.sizes,t=void 0===r?{}:r;return(null===t||void 0===t?void 0:t.price)*a[n]})))||void 0===n?void 0:n.reduce((function(e,n){return e+n}));a.length=r.length;var o=a.reduce((function(e,n){return e+n}));return(0,l.jsxs)("div",{className:"checkout",children:[(0,l.jsx)(_,{totalAmount:s,totalItems:o,data:r,counts:a}),(0,l.jsx)(p,{})]})},A=function(e){var n=e.data,r=(0,s.useState)((function(){return null===n||void 0===n?void 0:n.map((function(){return 1}))})),d=(0,a.Z)(r,2),u=d[0],h=d[1],v=function(e,n){h((function(r){var a=r;return a[n]=e,(0,t.Z)(a)}))},p=(0,o.v9)((function(e){return e.auth.user.wishlist})),f=(0,o.I0)(),x=function(e){!function(){var e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).some((function(r){return r.id===e&&r.variant===n}))}(p,e.id,e.variant)?f((0,i.Mp)(e)):f((0,c.f)({message:"Product already exists in wishlist",color:"danger"}))};return(0,l.jsxs)("section",{className:"cart",children:[(0,l.jsx)("div",{className:"cart_list",children:n&&(null===n||void 0===n?void 0:n.map((function(e,n){return(0,l.jsx)(m,{product:e,dispatch:f,handler:x,index:n,count:u[n],updateCount:v},e.id+e.variant)})))}),(0,l.jsx)(z,{data:n,counts:u})]})}},8992:function(e,n,r){r.d(n,{oB:function(){return a}});var t={locale:"en",currency:"INR"},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Intl.NumberFormat(t.locale,{style:"currency",currency:t.currency,maximumFractionDigits:2}).format(e)}}}]);
//# sourceMappingURL=34.67bf61fc.chunk.js.map