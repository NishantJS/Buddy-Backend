"use strict";(self.webpackChunkbuddyshop=self.webpackChunkbuddyshop||[]).push([[651],{5651:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(885),a=t(2791),i=t(184),s=function(){return(0,i.jsx)("img",{src:"/images/6252de227f25c4c2eaf73b91/product_title0",alt:"hello"})},o=function(e){var n=e.prevStep,t=void 0!==n&&n,r=e.nextStep,a=void 0!==r&&r,s=e.handleSubmit,o=void 0!==s&&s;return(0,i.jsxs)("div",{className:"switcher",children:[t&&(0,i.jsx)("button",{onClick:t,children:"Previous Step"}),a&&(0,i.jsx)("button",{onClick:a,children:"Next Step"}),o&&(0,i.jsx)("button",{type:"submit",onClick:o,children:"Submit"})]})},l=function(e){e.updateTitle;var n=e.nextStep,t=e.step;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{children:(0,i.jsx)("input",{type:"text"})}),(0,i.jsx)(o,{nextStep:n,step:t})]})},u=t(5861),d=t(2982),c=t(7757),v=t.n(c),f=t(6612),p=t(6030),g=t(4569),m=t.n(g),h=function(e){var n=e.image,t=e.upload,s=void 0!==t&&t,o=e.index,l=e.removeHandler,u=(0,a.useState)((function(){return s})),d=(0,r.Z)(u,1)[0],c=!(null===n||void 0===n||!n.name)&&URL.createObjectURL(n),v=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=v.current;if(e){var n=function(){return null===e||void 0===e?void 0:e.classList.add("dragging")},t=function(){return null===e||void 0===e?void 0:e.classList.remove("dragging")};return null===e||void 0===e||e.addEventListener("dragstart",n),null===e||void 0===e||e.addEventListener("dragend",t),function(){null===e||void 0===e||e.removeEventListener("dragstart",n),null===e||void 0===e||e.removeEventListener("dragend",t),c&&URL.revokeObjectURL(c)}}})),(0,i.jsxs)("li",{draggable:!0,ref:v,className:"draggable","data-index":o,children:[(0,i.jsx)("img",{src:c,alt:n.name,width:150,height:100}),(0,i.jsxs)("div",{className:"content",children:[(0,i.jsx)("span",{className:"name",title:null===n||void 0===n?void 0:n.name,children:null===n||void 0===n?void 0:n.name}),d&&(0,i.jsx)("span",{children:"Uploading"}),d?(0,i.jsx)("div",{className:"progress-bar",children:(0,i.jsx)("progress",{value:20,max:100})}):(0,i.jsxs)("div",{className:"size_and_remove",children:[(0,i.jsx)("span",{className:"size",children:Intl.NumberFormat("en",{style:"unit",unit:"kilobyte",notation:"compact"}).format((null===n||void 0===n?void 0:n.size)/1024)}),(0,i.jsx)("span",{onClick:function(){return l(o)},children:"Remove"})]})]})]})},x=function(e){var n=e.images,t=e.removeImage,r=e.moveImages,s=(0,a.useRef)(null);return(0,a.useEffect)((function(){var e=s.current;if(e){var t,a=function(a){var i;null===a||void 0===a||a.preventDefault();var s=null===(i=t)||void 0===i?void 0:i.dataset.index,o=function(n){var t,r=(0,d.Z)(e.querySelectorAll(".draggable:not(.dragging)"));return null===r||void 0===r||null===(t=r.reduce((function(e,t){var r=t.getBoundingClientRect(),a=n-r.top-r.height/2;return a<0&&a>e.offset?{offset:a,element:t}:e}),{offset:Number.NEGATIVE_INFINITY}))||void 0===t?void 0:t.element}(a.clientY),l=null===o||void 0===o?void 0:o.dataset.index;s&&l&&s!==l&&r(n,l,s)},i=function(){return t=e.getElementsByClassName("dragging")[0]};return null===e||void 0===e||e.addEventListener("dragstart",i),null===e||void 0===e||e.addEventListener("dragend",a),function(){null===e||void 0===e||e.removeEventListener("dragstart",i),null===e||void 0===e||e.removeEventListener("dragend",a)}}}),[n,r]),(0,i.jsx)("div",{className:"uploaded-area",children:(0,i.jsx)("ol",{ref:s,children:n.map((function(e,n){return(0,i.jsx)(h,{image:e,removeHandler:t,index:n},null===e||void 0===e?void 0:e.name)}))})})},j=function(){return(0,i.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{d:"M18.42 8.22a7 7 0 0 0-13.36 1.89A4 4 0 0 0 6 18a1 1 0 0 0 0-2 2 2 0 0 1 0-4 1 1 0 0 0 1-1 5 5 0 0 1 9.73-1.61 1 1 0 0 0 .78.67 3 3 0 0 1 .24 5.84 1 1 0 0 0 .5 1.94 5 5 0 0 0 .17-9.62zm-5.71 2.07a1 1 0 0 0-.33-.21 1 1 0 0 0-.76 0 1 1 0 0 0-.33.21l-3 3a1 1 0 0 0 1.42 1.42l1.29-1.3V19a1 1 0 0 0 2 0v-5.59l1.29 1.3a1 1 0 1 0 1.42-1.42z"})})},b=(0,a.memo)(j),S=function(e){var n=e.images,t=e.addMessage,r=e.updateImages,a=function(e){null===e||void 0===e||e.preventDefault();var a=function(e){return n.some((function(n){return n.name===e.name&&n.size===e.size}))},i=e.dataTransfer||!1,s=i?i.files:e.target.files,o=s.length;o+n.length>5&&(o=5,t("Image limit exceeds! Please select less than 5 Images!"));for(var l=[],u=0;u<o;u++)"image/png"!==s[u].type?t("Unsupported file type! Please only use PNG transparent images"):a(s[u])?t("Image already Added"):l.push(s[u]);l&&r(l)};return(0,i.jsxs)("form",{className:"image_form",onDragOver:function(e){return null===e||void 0===e?void 0:e.preventDefault()},onDrop:a,children:[(0,i.jsxs)("label",{htmlFor:"images_input",children:[(0,i.jsx)(b,{}),(0,i.jsx)("h3",{children:"Browse files to upload or drag here"})]}),(0,i.jsx)("input",{type:"file",id:"images_input",onChange:a,accept:".png",multiple:!0})]})},N=function(e){var n=e.prevStep,t=e.nextStep,s=e.title,l=void 0!==s&&s,c=(0,a.useState)((function(){return[]})),g=(0,r.Z)(c,2),h=g[0],j=g[1],b=(0,p.I0)(),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger";b((0,f.f)({message:e,color:n}))},y=function(){var e=(0,u.Z)(v().mark((function e(){var n,r,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new FormData,r={headers:{"content-type":"multipart/form-data"},validateStatus:function(){return!0},onUploadProgress:function(e){return console.log(Math.round(100*e.loaded/e.total))}},h.forEach((function(e){return n.append("product_image",e)})),e.next=6,m().post("/seller/upload/".concat(l),n,r);case 6:if(a=e.sent,!(i=a.data).error){e.next=10;break}throw new Error(i.data);case 10:N(i.data),t(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),N((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"File upload failed! Please try again!");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"wrapper",children:[(0,i.jsx)(S,{images:h,addMessage:N,updateImages:function(e){j((function(n){return[].concat((0,d.Z)(n),(0,d.Z)(e))}))}}),(0,i.jsx)(x,{images:h,removeImage:function(e){j((function(n){return n.filter((function(n,t){return t!==e}))}))},moveImages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,r=h[t];j((function(){var a=(0,d.Z)(e);return a.splice(t,1),[].concat((0,d.Z)(a.slice(0,n)),[r],(0,d.Z)(a.slice(n)))}))}})]}),(0,i.jsx)(o,{prevStep:n,nextStep:y})]})},y=function(){var e=(0,a.useState)((function(){return[]})),n=(0,r.Z)(e,2),t=n[0],s=n[1],o="product_title ",l=(0,a.useRef)(null),c=(0,p.I0)(),g=function(){var e=(0,u.Z)(v().mark((function e(){var n,r,a,i;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=new FormData,r={headers:{"content-type":"multipart/form-data"},validateStatus:function(){return!0},onUploadProgress:function(e){return console.log(Math.round(100*e.loaded/e.total))}},t.forEach((function(e){return n.append("product_image",e)})),e.next=6,m().post("/seller/upload/".concat(o),n,r);case 6:if(a=e.sent,!(i=a.data).error){e.next=10;break}throw new Error(i.data);case 10:c((0,f.f)({message:i.data})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),c((0,f.f)({message:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"File upload failed! Please try again!",color:"danger"}));case 16:return e.prev=16,s((function(){return[]})),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return(0,a.useEffect)((function(){var e=l.current;if(e){var n,r=function(r){var a;null===r||void 0===r||r.preventDefault();var i=null===(a=n)||void 0===a?void 0:a.dataset.index,o=function(n){var t,r=(0,d.Z)(e.querySelectorAll(".draggable:not(.dragging)"));return null===r||void 0===r||null===(t=r.reduce((function(e,t){var r=t.getBoundingClientRect(),a=n-r.top-r.height/2;return a<0&&a>e.offset?{offset:a,element:t}:e}),{offset:Number.NEGATIVE_INFINITY}))||void 0===t?void 0:t.element}(r.clientY),l=null===o||void 0===o?void 0:o.dataset.index;i&&l&&i!==l&&function(e,n,r){var a=t[r];s((function(){var t=(0,d.Z)(e);return t.splice(r,1),[].concat((0,d.Z)(t.slice(0,n)),[a],(0,d.Z)(t.slice(n)))}))}(t,l,i)},a=function(){return n=e.getElementsByClassName("dragging")[0]};return null===e||void 0===e||e.addEventListener("dragstart",a),null===e||void 0===e||e.addEventListener("dragend",r),function(){null===e||void 0===e||e.removeEventListener("dragstart",a),null===e||void 0===e||e.removeEventListener("dragend",r)}}}),[t]),(0,i.jsxs)("div",{className:"wrapper",children:[(0,i.jsxs)("form",{className:"image_form",draggable:!0,children:[(0,i.jsxs)("label",{htmlFor:"images_input",children:[(0,i.jsx)(b,{}),(0,i.jsx)("h3",{children:"Browse files to upload or drag here"})]}),(0,i.jsx)("input",{type:"file",id:"images_input",onChange:function(e){var n=function(e){return t.some((function(n){return n.name===e.name&&n.size===e.size}))},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger";c((0,f.f)({message:e,color:n}))},a=e.target.files,i=a.length;i+t.length>5&&(i=5,r("Image limit exceeds! Please select less than 5 Images!"));for(var o=[],l=0;l<i;l++)"image/png"!==a[l].type?r("Unsupported file type! Please only use PNG transparent images"):n(a[l])?r("Image already Added"):o.push(a[l]);o&&s((function(e){return[].concat((0,d.Z)(e),o)}))},accept:".png",multiple:!0})]}),(0,i.jsx)(x,{images:t,dragRef:l,title:o,removeImage:function(e){s((function(n){return n.filter((function(n,t){return t!==e}))}))}}),(0,i.jsx)("input",{type:"submit",value:"submit",onClick:g})]})},w=function(e){var n=e.step,t=void 0===n?0:n;return(0,i.jsx)("ol",{className:"stepper",children:["Meta","Images","Description","Review"].map((function(e,n){return(0,i.jsx)("li",{className:"stepper__item ".concat(t>n?"visited":""," ").concat(t===n?"current":""),"data-index":n+1,children:(0,i.jsx)("h6",{className:"stepper__title",children:e})},e)}))})},E=function(e){var n=e.step,t=e.nextStep,o=e.prevStep,u=(0,a.useState)((function(){return!1})),d=(0,r.Z)(u,2),c=d[0],v=d[1],f=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];v((function(){return e}))};switch(n){case 0:default:return(0,i.jsx)(l,{updateTitle:f,nextStep:t});case 1:return(0,i.jsx)(N,{prevStep:o,nextStep:t,title:c});case 2:return(0,i.jsx)(s,{prevStep:o,nextStep:t});case 3:return(0,i.jsx)(y,{title:c,prevStep:o})}},I=function(){var e=(0,a.useState)((function(){return 1})),n=(0,r.Z)(e,2),t=n[0],s=n[1];return(0,i.jsxs)("section",{className:"product_form",children:[(0,i.jsx)(w,{step:t}),(0,i.jsx)(E,{prevStep:function(){t<=0||s((function(e){return e-1}))},nextStep:function(){t>=3||s((function(e){return e+1}))},step:t})]})}}}]);
//# sourceMappingURL=651.7dae4f0a.chunk.js.map